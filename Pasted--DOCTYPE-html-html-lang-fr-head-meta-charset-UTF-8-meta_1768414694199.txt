<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Damas Food | Menu</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Poppins:wght@300;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #00a082; --bg: #f7f7f7; --card: #ffffff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { background: var(--bg); color: #1a1a1a; margin: 0; font-family: 'Poppins', 'Cairo', sans-serif; padding-bottom: 90px; }
        .rtl { direction: rtl; }
        header { background: #fff; padding: 15px; position: sticky; top: 0; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .logo { font-weight: 800; font-size: 1.3rem; }
        .lang-btn { background: #f0f0f0; border: none; padding: 6px 15px; border-radius: 20px; font-weight: 600; }
        .cat-bar { display: flex; overflow-x: auto; padding: 15px; background: #fff; gap: 10px; scrollbar-width: none; border-bottom: 1px solid #eee; }
        .cat-chip { padding: 8px 20px; background: #f0f0f0; border-radius: 25px; white-space: nowrap; font-weight: 600; font-size: 0.85rem; cursor: pointer; }
        .cat-chip.active { background: #000; color: #fff; }
        .menu-grid { padding: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .food-card { background: #fff; border-radius: 15px; overflow: hidden; position: relative; border: 1px solid #eee; display: flex; flex-direction: column; }
        .food-img { width: 100%; height: 110px; object-fit: cover; background: #eee; }
        .food-info { padding: 10px; flex-grow: 1; }
        .food-title { font-size: 0.85rem; font-weight: 700; margin: 0; min-height: 34px; }
        .food-price { font-weight: 800; color: var(--primary); font-size: 1rem; margin-top: 5px; display: block; }
        .add-btn { position: absolute; bottom: 8px; right: 8px; background: #000; color: #fff; width: 28px; height: 28px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; }
        .rtl .add-btn { right: auto; left: 8px; }
        .cart-bar { position: fixed; bottom: 15px; left: 15px; right: 15px; background: #000; color: #fff; padding: 16px 20px; border-radius: 12px; display: none; justify-content: space-between; align-items: center; z-index: 2000; box-shadow: 0 10px 30px rgba(0,0,0,0.3); cursor: pointer; }
        #cart-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 3000; display: none; flex-direction: column; }
        .modal-header { padding: 20px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 15px; }
        .cart-list { flex: 1; overflow-y: auto; padding: 20px; }
        .cart-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #f9f9f9; padding-bottom: 10px; }
        .qty-box { display: flex; align-items: center; gap: 12px; background: #f0f0f0; padding: 5px 12px; border-radius: 20px; }
        .btn-submit { background: #000; color: #fff; width: calc(100% - 40px); margin: 20px auto; padding: 18px; border-radius: 12px; border: none; font-weight: 700; }
    </style>
</head>
<body>
    <header>
        <div class="logo">DAMAS FOOD</div>
        <button class="lang-btn" onclick="toggleLang()">العربية</button>
    </header>
    <div class="cat-bar" id="cat-bar"></div>
    <div class="menu-grid" id="menu-grid"></div>
    <div class="cart-bar" id="cart-bar" onclick="openCart()">
        <span id="cart-count">0 Items</span>
        <span id="cart-total">0.00€</span>
    </div>
    <div id="cart-modal">
        <div class="modal-header">
            <i class="fas fa-arrow-left" onclick="closeCart()"></i>
            <h2 id="cart-title" style="margin:0; font-size:1.1rem;">Votre Panier</h2>
        </div>
        <div class="cart-list" id="cart-list"></div>
        <button class="btn-submit" id="btn-submit" onclick="sendOrder()">Commander</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAapyMqWP9uZ0biLZKwbdQ-apLn9_o964w",
            authDomain: "restaurant-menu-28c93.firebaseapp.com",
            databaseURL: "https://restaurant-menu-28c93-default-rtdb.firebaseio.com",
            projectId: "restaurant-menu-28c93",
            storageBucket: "restaurant-menu-28c93.firebasestorage.app",
            messagingSenderId: "1043575815814",
            appId: "1:1043575815814:web:3153fa758125b740285b07"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let lang = 'fr'; let cart = []; let activeCat = 'all';
        const menu = {
            fr: { cats: {all:"Tout", s:"Sandwichs", p:"Pizzas", b:"Burgers"}, 
                  items: [{id:1, cat:'s', name:"Shawarma Poulet", price:7.0, img:"https://images.unsplash.com/photo-1529006557810-274b9b2fc783?w=300"},
                          {id:2, cat:'p', name:"Pizza Damas", price:10.0, img:"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=300"}],
                  title: "Votre Panier", btn: "Commander" },
            ar: { cats: {all:"الكل", s:"سندويش", p:"بيتزا", b:"برجر"}, 
                  items: [{id:1, cat:'s', name:"شاورما دجاج", price:7.0, img:"https://images.unsplash.com/photo-1529006557810-274b9b2fc783?w=300"},
                          {id:2, cat:'p', name:"بيتزا شامية", price:10.0, img:"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=300"}],
                  title: "سلة المشتريات", btn: "إرسال الطلب" }
        };

        function render() {
            document.body.className = lang === 'ar' ? 'rtl' : '';
            const bar = document.getElementById('cat-bar'); bar.innerHTML = '';
            for(let k in menu[lang].cats) bar.innerHTML += `<div class="cat-chip ${activeCat===k?'active':''}" onclick="setCat('${k}')">${menu[lang].cats[k]}</div>`;
            const grid = document.getElementById('menu-grid'); grid.innerHTML = '';
            const list = activeCat === 'all' ? menu[lang].items : menu[lang].items.filter(i => i.cat === activeCat);
            list.forEach(i => grid.innerHTML += `<div class="food-card" onclick="addToCart(${i.id})"><img src="${i.img}" class="food-img"><div class="food-info"><h4 class="food-title">${i.name}</h4><span class="food-price">${i.price.toFixed(2)}€</span></div><button class="add-btn">+</button></div>`);
        }
        function addToCart(id) { const item = menu[lang].items.find(i => i.id === id); const ex = cart.find(c => c.id === id); if(ex) ex.qty++; else cart.push({...item, qty: 1}); updateUI(); }
        function updateUI() {
            const total = cart.reduce((s, i) => s + (i.price*i.qty), 0);
            document.getElementById('cart-total').innerText = total.toFixed(2) + '€';
            document.getElementById('cart-count').innerText = cart.length + ' Items';
            document.getElementById('cart-bar').style.display = cart.length > 0 ? 'flex' : 'none';
            const list = document.getElementById('cart-list'); list.innerHTML = '';
            cart.forEach(i => list.innerHTML += `<div class="cart-row"><div><b>${i.name}</b></div><div class="qty-box"><i class="fas fa-minus" onclick="changeQty(${i.id},-1)"></i><b>${i.qty}</b><i class="fas fa-plus" onclick="changeQty(${i.id},1)"></i></div></div>`);
        }
        function changeQty(id, d) { const i = cart.find(x => x.id === id); i.qty += d; if(i.qty <= 0) cart = cart.filter(x => x.id !== id); updateUI(); if(cart.length === 0) closeCart(); }
        function toggleLang() { lang = lang === 'fr' ? 'ar' : 'fr'; render(); updateUI(); }
        function setCat(c) { activeCat = c; render(); }
        function openCart() { document.getElementById('cart-modal').style.display = 'flex'; }
        function closeCart() { document.getElementById('cart-modal').style.display = 'none'; }
        function sendOrder() {
            db.ref('orders').push({ table: "7", items: cart.map(i => `${i.name} x${i.qty}`), total: cart.reduce((s, i) => s + (i.price*i.qty), 0).toFixed(2), time: new Date().toLocaleTimeString() })
            .then(() => { alert("Success!"); cart = []; updateUI(); closeCart(); });
        }
        render();
    </script>
</body>
</html>